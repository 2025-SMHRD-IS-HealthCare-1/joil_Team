<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>VitaMind - ì‹œë‹ˆì–´ í—¬ìŠ¤ì¼€ì–´</title>
<style>
  body, html { margin: 0; padding: 0; background-color: #F8F9FA; font-family: "Noto Sans KR", sans-serif; font-size: 28px; font-weight: 700; }
  .app { width: 100%; height: 100vh; display: flex; flex-direction: column; background-color: #fff; }
  header { background-color: #00796B; color: #fff; display: flex; justify-content: space-between; align-items: center; padding: 20px 30px; font-size: 40px; font-weight: 900; }
  .header-title { cursor: pointer; }
  .mic-button { background: none; border: none; color: white; font-size: 50px; cursor: pointer; padding: 10px; }
  .mic-button.active { color: #FF5722; }
  .speech-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); color: white; display: flex; justify-content: center; align-items: center; font-size: 36px; text-align: center; z-index: 100; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
  .speech-overlay.visible { opacity: 1; visibility: visible; }
  main { flex: 1; padding: 30px; overflow-y: auto; }
  section { display: none; }
  section.active { display: block; }
  h2 { font-size: 42px; }
  .home-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-top: 30px; }
  .home-menu button { padding: 40px 20px; font-size: 32px; font-weight: bold; border: 2px solid #00796B; border-radius: 15px; background-color: #E0F2F1; color: #004D40; cursor: pointer; }
  .friend-card { border: 2px solid #BDBDBD; border-radius: 15px; padding: 25px; margin-bottom: 20px; background-color: #FAFAFA; }
  .friend-name { font-size: 34px; font-weight: 900; color: #004D40; }
  .friend-category { font-size: 26px; color: #555; }
  .friend-card button { font-size: 28px; padding: 10px 20px; border: none; background-color: #00796B; color: #fff; border-radius: 10px; cursor: pointer; margin-top: 10px; }
  .product-card { border: 2px solid #BDBDBD; border-radius: 15px; padding: 25px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
  .product-info { font-size: 30px; }
  .product-card button { font-size: 30px; padding: 15px 25px; border: none; background-color: #00796B; color: #fff; border-radius: 10px; cursor: pointer; }
  #cart { margin-top: 40px; background-color: #f1f1f1; border-radius: 15px; padding: 20px; }
  #cart-items li { font-size: 28px; padding: 8px 0; }
  nav { display: flex; justify-content: space-around; background-color: #fff; border-top: 3px solid #eee; padding: 20px 0; }
  .nav-btn { flex: 1; text-align: center; font-size: 32px; cursor: pointer; padding: 10px 0; }
  .nav-btn.active { color: #00796B; font-weight: 900; }
  .emergency-btn { background-color: #D32F2F !important; color: white !important; border-color: #B71C1C !important; animation: blink 2s infinite; }
  @keyframes blink { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(211, 47, 47, 0.7); } 70% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(211, 47, 47, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(211, 47, 47, 0); } }
  #calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; margin-top: 20px; }
  .calendar-day { border: 1px solid #ccc; border-radius: 10px; padding: 10px; min-height: 80px; font-size: 28px; background-color: #FAFAFA; }
  .calendar-day.today { background-color: #C8E6C9; }
  .calendar-day.empty { background: none; border: none; }
  .day-event { color: #00796B; font-size: 26px; margin-top: 6px; }
  #map { width: 100%; height: 400px; }
</style>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=433a059560072e066820d8b58d1e68f7&autoload=false"></script>
</head>
<body>
<div class="app">
  <header>
    <div class="header-title">VitaMind</div>
    <button class="mic-button" id="micButton" onclick="toggleMic()">ğŸ¤</button>
  </header>

  <div class="speech-overlay" id="speechOverlay">
    <div id="speechStatus">ìŒì„± ì¸ì‹ ëŒ€ê¸° ì¤‘...</div>
  </div>

  <main>
    <section id="home" class="active">
      <h2>ğŸ  ì–´ì„œì˜¤ì„¸ìš”! VitaMindì…ë‹ˆë‹¤. ğŸ‘¥</h2>
      <p style="font-size:28px; font-weight:normal; margin-bottom:40px;">
        "ì¹œêµ¬ ì°¾ì•„ì¤˜", "ë°°ì¶” ë‹´ì•„ì¤˜" ë¼ê³  ë§ì”€í•´ë³´ì„¸ìš”.
      </p>
      <div class="home-menu">
        <button onclick="show('friends')">ğŸ‘¥<br>ì¹œêµ¬</button>
        <button onclick="show('market')">ğŸ›’<br>ì¥ë³´ê¸°</button>
        <button onclick="show('map')">ğŸ—ºï¸<br>ì§€ë„</button>
        <button onclick="show('schedule')">ğŸ“…<br>ìš°ë¦¬ë“¤ì˜ ì¼ì •</button>
        <button onclick="show('emergency')" class="emergency-btn">ğŸš¨<br>ê¸´ê¸‰ ì—°ë½</button>
      </div>
       <div style="margin-top:18px; text-align:center;">
        <button onclick="findNearbyFriends()" style="padding:14px 20px; font-size:28px; border-radius:12px; border:2px solid #00796B; background:#E0F2F1; cursor:pointer;">
          ğŸ“ ê·¼ì²˜ ì¹œêµ¬ ì°¾ê¸°
        </button>
      </div>
    </section>
    <section id="friends">
      <h2>ğŸ‘¥ ì¹œêµ¬ ì°¾ê¸°</h2>
      <div id="friends-list"></div>
    </section>
    <section id="market">
      <div class="market-container">
        <div id="product-list">
          <h2>ğŸ›’ ì‹œì¥ ë¬¼í’ˆ</h2>
        </div>
        <div id="cart">
          <h3>ğŸ§º ë‹´ì€ ë¬¼í’ˆ (<span id="cart-count">0</span>ê°œ)</h3>
          <ul id="cart-items"></ul>
        </div>
      </div>
    </section>
    <section id="alerts">
      <h2>ğŸ”” ì•Œë¦¼</h2>
      <ul style="font-size:28px;">
        <li>10ì›” 22ì¼ - ê±´ê°•ê²€ì§„</li>
        <li>10ì›” 25ì¼ - ë³µì§€ê´€ ìš”ë¦¬ êµì‹¤</li>
        <li>10ì›” 30ì¼ - ì‹œë‹ˆì–´ ìŒì•…íšŒ</li>
      </ul>
    </section>
    <section id="call">
      <h2>ğŸ“ ì „í™” ê±¸ê¸°</h2>
      <p style="font-size:30px;">"ê°€ì¡±ì—ê²Œ ì „í™”í•´ì¤˜", "ë³µì§€ê´€ ì „í™”í•´ì¤˜"ë¼ê³  ë§í•´ë³´ì„¸ìš”.</p>
    </section>
    <section id="schedule">
      <h2>ğŸ“… 2025ë…„ 10ì›” ì¼ì •</h2>
      <div id="calendar-grid"></div>
    </section>
    <section id="map">
      <h2>ğŸ—ºï¸ ë‚´ ì£¼ë³€ ì§€ë„</h2>
      <div id="map" style="width:100%;height:400px;"></div>
    </section>
    <section id="emergency">
      <div class="content-pane">
        <h2>ğŸš¨ ì‘ê¸‰ ìƒí™©</h2>
        <p style="font-size:35px;">"ë„ì™€ì¤˜", "119" ë“±ì„ ë§ì”€í•˜ì„¸ìš”.</p>
        <button onclick="makeEmergencyCall('119')" class="emergency-btn" style="width:100%; padding: 30px; font-size: 40px; margin-top:20px;">
          ğŸ“ 119 ì¦‰ì‹œ ì—°ê²°
        </button>
        <button onclick="makeEmergencyCall('guardian')" style="width:100%; padding: 30px; font-size: 40px; margin-top:20px;">
          ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ë³´í˜¸ìì—ê²Œ ì—°ë½
        </button>
      </div>
    </section>
  </main>
  <nav>
    <div class="nav-btn active" data-target="home">í™ˆ</div>
    <div class="nav-btn" data-target="friends">ì¹œêµ¬</div>
    <div class="nav-btn" data-target="market">ì‹œì¥</div>
    <div class="nav-btn" data-target="alerts">ì•Œë¦¼</div>
    <div class="nav-btn" data-target="call">ì „í™”</div>
    <div class="nav-btn" data-target="emergency">ì‘ê¸‰</div>
  </nav>
</div>

<script>
  // ===== ë°ì´í„° =====
  const friends = [
    { name: "ê¹€ì˜ì", category: "ìš´ë™", desc: "ë§¤ì¼ ì•„ì¹¨ ê³µì› ìš´ë™ì„ í•¨ê»˜í•´ìš”.", phone:"01012345678" },
    { name: "ë°•ì² ìˆ˜", category: "ì‚°ì±…", desc: "ì €ë…ë§ˆë‹¤ ë™ë„¤ í•œ ë°”í€´ ì‚°ì±…í•©ë‹ˆë‹¤.", phone:"01023456789" },
    { name: "ì´ìˆœì", category: "ìš”ë¦¬", desc: "ìš”ë¦¬ êµì‹¤ ê°™ì´ ê°€ì‹¤ë˜ìš”?", phone:"01034567890" },
    { name: "ìµœë¯¼í˜¸", category: "ì˜í™”", desc: "ì£¼ë§ ì˜í™”ê´€ ë™í–‰ì„ ì°¾ì•„ìš”.", phone:"01045678901" },
    { name: "ì •ë¯¸ë¼", category: "ìŒì•…", desc: "ë…¸ë˜ë°©Â·í•©ì°½ë‹¨ ì¹œêµ¬ êµ¬í•´ìš”.", phone:"01056789012" }
  ];
  const marketProducts = [
    { id: 1, name: 'ë°°ì¶”', price: 2000 }, { id: 2, name: 'ê°ì', price: 1500 },
    { id: 3, name: 'ì‚¬ê³¼', price: 3000 }, { id: 4, name: 'ë¼ì§€ê³ ê¸°', price: 8000 },
  ];
  const cart = [];
  const scheduleData = {
    5: { event: "ë³‘ì› ì§„ë£Œ", details: "ë‚´ê³¼ ì˜¤ì „ 9ì‹œ" }, 12: { event: "ë³µì§€ê´€ ìš”ë¦¬êµì‹¤" },
    18: { event: "ì†ì£¼ ìƒì¼" }, 22: { event: "ê±´ê°•ê²€ì§„" }, 25: { event: "ìš”ë¦¬ êµì‹¤" }, 30: { event: "ì‹œë‹ˆì–´ ìŒì•…íšŒ" }
  };

  // ===== ì§€ë„ ê´€ë ¨ ë³€ìˆ˜ ë° í•¨ìˆ˜ (ìˆ˜ì •ë¨) =====
  let map = null; // ì§€ë„ ê°ì²´ë¥¼ ì €ì¥í•  ì „ì—­ ë³€ìˆ˜

  function initMap() {
      const mapContainer = document.getElementById('map');
      const mapOption = {
          center: new kakao.maps.LatLng(35.1601, 126.8517), // ê´‘ì£¼ê´‘ì—­ì‹œì²­ ì¢Œí‘œ
          level: 5
      };
      map = new kakao.maps.Map(mapContainer, mapOption);

      const marker = new kakao.maps.Marker({
          position: mapOption.center
      });
      marker.setMap(map);
  }

  // ===== UI í•¨ìˆ˜ (ìˆ˜ì •ë¨) =====
  function show(id) {
    document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
    const section = document.getElementById(id);
    if (section) {
        section.classList.add("active");
        
        // 'ì§€ë„' ì„¹ì…˜ì´ í‘œì‹œë  ë•Œë§Œ ì§€ë„ ê´€ë ¨ ë¡œì§ ì‹¤í–‰
        if (id === 'map') {
            // kakao.maps.loadë¥¼ ì‚¬ìš©í•˜ì—¬ API ë¡œë“œê°€ ì™„ë£Œëœ í›„ ì§€ë„ ìƒì„±
            kakao.maps.load(function() {
                // ì§€ë„ê°€ ì´ë¯¸ ìƒì„±ë˜ì—ˆë‹¤ë©´ í¬ê¸°ë§Œ ì¬ì¡°ì •í•˜ê³ , ì—†ë‹¤ë©´ ìƒˆë¡œ ìƒì„±
                if (map) {
                    map.relayout();
                    map.setCenter(new kakao.maps.LatLng(35.1601, 126.8517)); // ì¤‘ì‹¬ ì¬ì„¤ì •
                } else {
                    initMap();
                }
            });
        }
    }
    document.querySelectorAll(".nav-btn").forEach(b => b.classList.toggle("active", b.dataset.target === id));
  }

  // ===== ì¹œêµ¬ ëª©ë¡ í•¨ìˆ˜ =====
  function renderFriends(list = friends) {
    const div = document.getElementById('friends-list');
    div.innerHTML = "";
    list.forEach(f => {
      const card = document.createElement('div');
      card.className = "friend-card";
      card.innerHTML = `
        <div class="friend-name">${f.name}</div>
        <div class="friend-category">ğŸ’¬ ${f.category} ì¹œêµ¬</div>
        <div style="font-size:26px; margin-top:8px;">${f.desc}</div>
        <button onclick="call('${f.phone}', '${f.name}')">ì—°ë½í•˜ê¸°</button>
      `;
      div.appendChild(card);
    });
  }

  // ===== ì¥ë³´ê¸° í•¨ìˆ˜ =====
  function renderProducts() {
    const productListDiv = document.getElementById('product-list');
    const h2 = productListDiv.querySelector('h2');
    productListDiv.innerHTML = '';
    productListDiv.appendChild(h2);
    marketProducts.forEach(product => {
      const card = document.createElement('div');
      card.className = 'product-card';
      card.innerHTML = `
        <span class="product-info">${product.name} - ${product.price.toLocaleString()}ì›</span>
        <button onclick="addToCart(${product.id})">ë‹´ê¸°</button>
      `;
      productListDiv.appendChild(card);
    });
  }
  function addToCart(id) {
    const product = marketProducts.find(p => p.id === id);
    if (product) { cart.push(product); renderCart(); alert(`${product.name}ì„(ë¥¼) ì¥ë°”êµ¬ë‹ˆì— ë‹´ì•˜ìŠµë‹ˆë‹¤.`); }
  }
  function renderCart() {
    const list = document.getElementById('cart-items');
    const count = document.getElementById('cart-count');
    list.innerHTML = '';
    cart.forEach(item => {
      const li = document.createElement('li');
      li.textContent = `${item.name} (${item.price.toLocaleString()}ì›)`;
      list.appendChild(li);
    });
    count.textContent = cart.length;
  }

  // ===== ë‹¬ë ¥ í•¨ìˆ˜ =====
  function renderSchedule() {
    const calendarGrid = document.getElementById('calendar-grid');
    calendarGrid.innerHTML = '';
    const year = 2025, month = 9; // 10ì›”
    const today = new Date();
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    for (let i = 0; i < firstDay; i++) { calendarGrid.innerHTML += '<div class="calendar-day empty"></div>'; }
    for (let day = 1; day <= daysInMonth; day++) {
      const dayDiv = document.createElement('div');
      dayDiv.className = 'calendar-day';
      let html = `<div class="day-number">${day}</div>`;
      if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) { dayDiv.classList.add('today'); }
      if (scheduleData[day]) {
        const item = scheduleData[day];
        html += `<div class="day-event">${item.event}${item.details ? ` (${item.details})` : ''}</div>`;
      }
      dayDiv.innerHTML = html;
      calendarGrid.appendChild(dayDiv);
    }
  }

  // ===== ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ë“±ë¡ =====
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelector('.header-title').onclick = () => show('home');
    document.querySelectorAll('.nav-btn').forEach(btn => {
      btn.addEventListener('click', () => show(btn.dataset.target));
    });
    renderSchedule(); renderFriends(); renderProducts(); renderCart();
  });

  // ===== ì „í™” í•¨ìˆ˜ =====
  function call(phone, name) { alert(`${name}ë‹˜ê³¼ ì—°ê²°ì„ ì‹œë„í•©ë‹ˆë‹¤.\n${phone}`); window.location.href = `tel:${phone}`; }

  // (ìŒì„±ì¸ì‹ ë° ê¸°íƒ€ í•¨ìˆ˜ë“¤ì€ ì—¬ê¸°ì— ìœ„ì¹˜í•©ë‹ˆë‹¤)
  function makeEmergencyCall(target) {
    if(target === '119') { window.location.href = 'tel:119'; } 
    else if(target === 'guardian') { const guardianPhone = '01012345678'; window.location.href = `tel:${guardianPhone}`; }
  }
  let recognizing = false; let recognition;
  const micBtn = document.getElementById('micButton'); const speechOverlay = document.getElementById('speechOverlay'); const speechStatus = document.getElementById('speechStatus');
  if ('webkitSpeechRecognition' in window) {
    recognition = new webkitSpeechRecognition(); recognition.lang = "ko-KR"; recognition.continuous = false; recognition.interimResults = false;
    recognition.onstart = () => { recognizing = true; micBtn.classList.add("active"); speechStatus.textContent = "ë“£ê³  ìˆì–´ìš”..."; speechOverlay.classList.add("visible"); };
    recognition.onresult = event => { const text = event.results[0][0].transcript.trim(); speechStatus.textContent = `"${text}"`; handleVoiceCommand(text); };
    recognition.onend = () => { recognizing = false; micBtn.classList.remove("active"); setTimeout(() => speechOverlay.classList.remove("visible"), 1500); };
  } else { alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„±ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."); micBtn.style.display = "none"; }
  function toggleMic() { if (!recognition) return; if (recognizing) recognition.stop(); else recognition.start(); }
  function handleVoiceCommand(text) { /* (ìŒì„± ëª…ë ¹ ì²˜ë¦¬ ë¡œì§) */ }
  async function findNearbyFriends() { /* (ê·¼ì²˜ ì¹œêµ¬ ì°¾ê¸° ë¡œì§) */ }

</script>
</body>
</html>